!function(){if(window)if(window.location.ancestorOrigins){var e=t=>{const e=new URL(t).hostname.split(".");return e.slice(e[e.length-1].length<3&&e[e.length-2].length<3?-3:-2).join(".")};for(let t=0;t<window.location.ancestorOrigins.length;++t)if(window.location.ancestorOrigins[t]!=window.location.origin&&e(window.location.ancestorOrigins[t])!=e(window.location.origin))return}else if(window.top!=window||window.parent!=window)return;const m=(""+Math.random()).substring(2,20),p=window.BroadcastChannel?new BroadcastChannel(m):window;let o,l=(p.addEventListener("message",function(t){t.source&&t.source!==window||t.data.nonce!=m||"to"!=t.data.dir||chrome.runtime.sendMessage(t.data,t=>{t&&t.nonce==m&&"from"==t.dir&&p.postMessage(t,"*")})}),chrome.runtime.onMessage.addListener((t,e,o)=>{if("from"==t.dir)"tabchange"==t.method&&t.selected?localStorage["rtchelp:tabex"]=t.selected:(t.nonce=m,p.postMessage(t,"*"));else if("content"==t.dir&&"toggle"==t.method&&window.top===window)try{var r=t.data.domain,d=t.data.float,n=t.data.restore,s=t.data.side;if(l)l=!1,y&&(i=y,y=null,document.body.removeChild(i),d||(document.body.style.removeProperty("padding-right"),document.body.style.removeProperty("padding-left"),document.body.style.removeProperty("padding-top"),document.body.style.removeProperty("padding-bottom"),document.body.style.removeProperty("max-width"),document.body.style.removeProperty("max-height"),document.body.style.removeProperty("box-sizing")),i.mover&&document.body.removeChild(i.mover)),delete localStorage["rtchelp:tabex"];else{console.log(`toggle(${r}, ${d}, ${n}, ${s})`),l=!0;const c=y=document.createElement("iframe");var i={position:"fixed","z-index":"2147483647",right:"0px",top:"0px",bottom:"0px",height:"100%",width:h+"px","box-sizing":"border-box",border:"none","border-left":"1px solid lightgrey","background-color":"white"};s&&("left"==s?Object.assign(i,{right:void 0,left:"0px","border-left":void 0,"border-right":"1px solid lightgrey"}):"bottom"==s&&Object.assign(i,{right:void 0,top:void 0,bottom:"0px",height:g+"px",width:"100%","border-left":void 0,"border-top":"1px solid lightgrey"})),Object.entries(i).filter(t=>void 0!==t[1]).forEach(t=>c.style.setProperty(t[0],t[1],"important")),d||("left"==s?(document.body.style.setProperty("padding-left",h+"px","important"),document.body.style.setProperty("max-width",`calc(100% - ${h}px)`,"important")):"bottom"==s?(document.body.style.setProperty("padding-bottom",g+"px","important"),document.body.style.setProperty("max-height",`calc(100% - ${g}px)`,"important")):(document.body.style.setProperty("padding-right",h+"px","important"),document.body.style.setProperty("max-width",`calc(100% - ${h}px)`,"important")),document.body.style.setProperty("box-sizing","content-box","important")),c.src="chrome-extension://"+chrome.runtime.id+"/options/index.html?nonce="+m,c.onload=()=>{const t={nonce:m,options:{type:"select",domain:r}};if(chrome.runtime.sendMessage(t),n){var e=localStorage["rtchelp:tabex"];if(e){const t={nonce:m,options:{type:"setTab",selected:e}};chrome.runtime.sendMessage(t)}}else delete localStorage["rtchelp:tabex"]},document.body.appendChild(c);const a=c.mover=document.createElement("div");i={position:"fixed","z-index":"2147483647",right:h+"px",top:"0px",bottom:"0px",width:"1px",cursor:"col-resize"};"left"==s?Object.assign(i,{right:void 0,left:h+"px"}):"bottom"==s&&Object.assign(i,{right:void 0,bottom:g+"px",top:void 0,left:"0px",right:"0px",width:void 0,height:"1px",cursor:"row-resize"}),Object.entries(i).filter(t=>void 0!==t[1]).forEach(t=>a.style.setProperty(t[0],t[1],"important")),document.body.appendChild(a),a.onmousedown=t=>{t.stopImmediatePropagation(),t.preventDefault();const o=t.currentTarget,r=(o.style.setProperty("background-color","black","important"),"bottom"==s?t.clientY:t.clientX);"bottom"==s?o.offsetTop:o.offsetLeft;const n="bottom"==s?c.offsetHeight:c.offsetWidth,i=(document.body.style.setProperty("cursor","bottom"==s?"row-resize":"col-resize","important"),c.style.setProperty("pointer-events","none","important"),t=>{var e="bottom"==s?t.clientY:t.clientX,e="left"==s?Math.max(240,e):Math.max(240,n-e+r);o.style.setProperty(s||"right",e+"px","important"),"mouseup"==t.type&&(c.style.setProperty("bottom"==s?"height":"width",e+"px","important"),document.body.style.removeProperty("cursor"),o.style.removeProperty("background-color"),c.style.removeProperty("pointer-events"),d||("left"==s?(document.body.style.setProperty("padding-left",c.offsetWidth+"px","important"),document.body.style.setProperty("max-width",`calc(100% - ${c.offsetWidth}px)`,"important")):"bottom"==s?(document.body.style.setProperty("padding-bottom",c.offsetHeight+"px","important"),document.body.style.setProperty("max-height",`calc(100% - ${c.offsetHeight}px)`,"important")):(document.body.style.setProperty("padding-right",c.offsetWidth+"px","important"),document.body.style.setProperty("max-width",`calc(100% - ${c.offsetWidth}px)`,"important")),document.body.style.setProperty("box-sizing","content-box","important")),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",i))});return document.addEventListener("mousemove",i),document.addEventListener("mouseup",i),!1}}}catch(t){console.error("exception",t)}}),!1),y=null;const h=510,g=400;chrome.storage.local.get(t=>{t.settings&&t.settings.strict&&(o=t.settings.strict,t={dir:"from",method:"setstrict",nonce:m,value:o},p.postMessage(t,"*"))});var t="chrome-extension://"+chrome.runtime.id+"/res";document.querySelector("html").setAttribute("rtchelper-nonce",m),document.querySelector("html").setAttribute("rtchelper-respath",t),window._rtchelper=!0}();
